---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectCardGrid from "../components/ProjectCardGrid.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
posts.sort((a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime());

const latestPost = posts.length > 0 ? posts[0] : null;

const projects = await getCollection("projects");
---

<BaseLayout title="Dani Bengl - Portfolio">
  <div class="hero-section">
    <div class="hero-content">
      <h1>Hello, I'm Dani!</h1>
      <p class="pronouns">(they/them)</p>
      <p>
        Welcome to my digital corner! I'm a passionate Software Developer from Austria.
        I love creating efficient, scalable solutions and exploring the latest technologies.
      </p>
      
      <div class="actions">
        <a href="/about" class="button">About Me</a>
        <a href="/projects" class="button">View Projects</a>
        <a href="/blog" class="button">Read Blog</a>
      </div>
    </div>
    <div class="hero-image">
      <div class="profile-placeholder">
        <span>Profile Image</span>
      </div>
    </div>
  </div>

  {latestPost && (
    <section>
      <h2>Latest Blog Post</h2>
      
      <article>
        <a href={`/blog/${latestPost.slug}`}>
          <h3>{latestPost.data.title}</h3>
        </a>
        
        <div class="meta">
          <span>
            Published on {latestPost.data.publishedAt.toLocaleDateString()}
          </span>
        </div>
        
        <p>{latestPost.data.description}</p>
        
        <a href={`/blog/${latestPost.slug}`}>Read more</a>
      </article>
      
      <a href="/blog">All Posts</a>
    </section>
  )}

  <section>
    <h2>Featured Project</h2>
    
    {projects.length > 0 && <ProjectCardGrid project={projects[0]} />}
    
    <a href="/projects">All Projects</a>
  </section>
</BaseLayout>
